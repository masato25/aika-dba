{
  "classifications": {
    "event": {
      "count": 0,
      "description": "事件 - 資料模型裡面的事件 (運輸、銷售等)",
      "dimensions": []
    },
    "location": {
      "count": 1,
      "description": "地點 - 上述發生的地點",
      "dimensions": [
        {
          "name": "dim_location",
          "type": "location",
          "description": "Location dimension table - automatically identified geography-related table",
          "source_table": "customer_addresses",
          "key_fields": [
            "id"
          ],
          "attributes": [
            "id",
            "customer_id",
            "address_type",
            "is_default",
            "street_address",
            "city",
            "state",
            "postal_code",
            "country",
            "created_at",
            "updated_at"
          ],
          "business_use": "Used for geographic location analysis"
        }
      ]
    },
    "people": {
      "count": 1,
      "description": "人 - 資料模型裡面的對象 (客戶、使用者、供應商等)",
      "dimensions": [
        {
          "name": "dim_customer",
          "type": "people",
          "description": "Customer dimension table - automatically identified customer-related table",
          "source_table": "customer_addresses",
          "key_fields": [
            "id"
          ],
          "attributes": [
            "id",
            "customer_id",
            "address_type",
            "is_default",
            "street_address",
            "city",
            "state",
            "postal_code",
            "country",
            "created_at",
            "updated_at"
          ],
          "business_use": "Used for customer-related business analysis"
        }
      ]
    },
    "product": {
      "count": 1,
      "description": "物體 - 資料模型裡面的物體 (產品、折扣券等)",
      "dimensions": [
        {
          "name": "dim_product",
          "type": "product",
          "description": "Product dimension table - automatically identified product-related table",
          "source_table": "inventory_transactions",
          "key_fields": [
            "id"
          ],
          "attributes": [
            "id",
            "product_id",
            "variant_id",
            "transaction_type",
            "quantity",
            "previous_quantity",
            "new_quantity",
            "reference_type",
            "reference_id",
            "notes",
            "created_by",
            "created_at"
          ],
          "business_use": "Used for product-related business analysis"
        }
      ]
    },
    "time": {
      "count": 1,
      "description": "時間 - 時間維度",
      "dimensions": [
        {
          "name": "dim_date",
          "type": "time",
          "description": "Time dimension table - automatically identified time-related table",
          "source_table": "categories",
          "key_fields": [
            "id"
          ],
          "attributes": [
            "id",
            "name",
            "description",
            "parent_id",
            "sort_order",
            "is_active",
            "created_at",
            "updated_at"
          ],
          "business_use": "Used for time series analysis"
        }
      ]
    }
  },
  "database": "ecommerce_db",
  "database_type": "postgres",
  "description": "Database dimension modeling using Lua rule engine with categorized output",
  "fact_tables": [
    {
      "name": "fact_sales",
      "description": "Sales fact table - records sales transactions",
      "source_table": "inventory_transactions",
      "measures": [
        "quantity",
        "amount",
        "total",
        "discount"
      ],
      "dimensions": [
        "dim_date",
        "dim_customer",
        "dim_product",
        "dim_location"
      ]
    },
    {
      "name": "fact_sales",
      "description": "Sales fact table - records sales transactions",
      "source_table": "payments",
      "measures": [
        "quantity",
        "amount",
        "total",
        "discount"
      ],
      "dimensions": [
        "dim_date",
        "dim_customer",
        "dim_product",
        "dim_location"
      ]
    },
    {
      "name": "fact_sales",
      "description": "Sales fact table - records sales transactions",
      "source_table": "returns",
      "measures": [
        "quantity",
        "amount",
        "total",
        "discount"
      ],
      "dimensions": [
        "dim_date",
        "dim_customer",
        "dim_product",
        "dim_location"
      ]
    },
    {
      "name": "fact_sales",
      "description": "Sales fact table - records sales transactions",
      "source_table": "reviews",
      "measures": [
        "quantity",
        "amount",
        "total",
        "discount"
      ],
      "dimensions": [
        "dim_date",
        "dim_customer",
        "dim_product",
        "dim_location"
      ]
    },
    {
      "name": "fact_sales",
      "description": "Sales fact table - records sales transactions",
      "source_table": "shopping_carts",
      "measures": [
        "quantity",
        "amount",
        "total",
        "discount"
      ],
      "dimensions": [
        "dim_date",
        "dim_customer",
        "dim_product",
        "dim_location"
      ]
    },
    {
      "name": "fact_sales",
      "description": "Sales fact table - records sales transactions",
      "source_table": "order_items",
      "measures": [
        "quantity",
        "amount",
        "total",
        "discount"
      ],
      "dimensions": [
        "dim_date",
        "dim_customer",
        "dim_product",
        "dim_location"
      ]
    },
    {
      "name": "fact_sales",
      "description": "Sales fact table - records sales transactions",
      "source_table": "orders",
      "measures": [
        "quantity",
        "amount",
        "total",
        "discount"
      ],
      "dimensions": [
        "dim_date",
        "dim_customer",
        "dim_product",
        "dim_location"
      ]
    },
    {
      "name": "fact_sales",
      "description": "Sales fact table - records sales transactions",
      "source_table": "shipments",
      "measures": [
        "quantity",
        "amount",
        "total",
        "discount"
      ],
      "dimensions": [
        "dim_date",
        "dim_customer",
        "dim_product",
        "dim_location"
      ]
    }
  ],
  "phase": "phase4",
  "summary": {
    "classification_counts": {
      "event": 0,
      "location": 1,
      "people": 1,
      "product": 1,
      "time": 1
    },
    "rule_engine_info": {
      "engine": "Gopher-Lua v1.1.1",
      "lua_script": "knowledge/dimension_rules.lua"
    },
    "total_dimensions": 4,
    "total_fact_tables": 8
  },
  "timestamp": "2025-11-05T18:27:21.974456+08:00"
}