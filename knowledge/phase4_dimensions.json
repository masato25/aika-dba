{
  "database": "ecommerce_db",
  "database_type": "postgres",
  "description": "Database dimension modeling using Lua rule engine",
  "dimensions": [
    {
      "name": "dim_date",
      "type": "time",
      "description": "Time dimension table - extracted from payment timestamps",
      "source_table": "payments",
      "key_fields": [
        "id"
      ],
      "attributes": [
        "processed_at",
        "created_at",
        "updated_at"
      ],
      "business_use": "Used for payment time series analysis"
    },
    {
      "name": "dim_product",
      "type": "product",
      "description": "Product dimension table - contains product information and attributes",
      "source_table": "products",
      "key_fields": [
        "id",
        "sku"
      ],
      "attributes": [
        "name",
        "description",
        "short_description",
        "category_id",
        "price",
        "cost_price",
        "compare_at_price",
        "weight",
        "dimensions",
        "inventory_quantity",
        "inventory_policy",
        "is_active",
        "is_featured",
        "tags",
        "images",
        "seo_title",
        "seo_description"
      ],
      "business_use": "Used for product sales analysis and categorization"
    },
    {
      "name": "dim_return",
      "type": "event",
      "description": "Return dimension table - contains return and refund information",
      "source_table": "returns",
      "key_fields": [
        "id"
      ],
      "attributes": [
        "reason",
        "status",
        "refund_amount",
        "items",
        "notes",
        "requested_at",
        "approved_at",
        "received_at",
        "refunded_at"
      ],
      "business_use": "Used for return analysis and quality improvement"
    },
    {
      "name": "dim_customer",
      "type": "people",
      "description": "Customer dimension table - automatically identified customer-related table",
      "source_table": "returns",
      "key_fields": [
        "id"
      ],
      "attributes": [
        "id",
        "order_id",
        "customer_id",
        "reason",
        "status",
        "refund_amount",
        "items",
        "notes",
        "requested_at",
        "approved_at",
        "received_at",
        "refunded_at",
        "created_at",
        "updated_at"
      ],
      "business_use": "Used for customer-related business analysis"
    },
    {
      "name": "dim_review",
      "type": "event",
      "description": "Review dimension table - contains user ratings and feedback",
      "source_table": "reviews",
      "key_fields": [
        "id"
      ],
      "attributes": [
        "rating",
        "title",
        "content",
        "images",
        "is_verified",
        "helpful_votes",
        "status"
      ],
      "business_use": "Used for rating analysis and user satisfaction research"
    },
    {
      "name": "dim_shipment",
      "type": "event",
      "description": "Shipment dimension table - contains logistics and delivery information",
      "source_table": "shipments",
      "key_fields": [
        "id"
      ],
      "attributes": [
        "tracking_number",
        "carrier",
        "status",
        "shipped_at",
        "delivered_at",
        "estimated_delivery",
        "shipping_address",
        "weight",
        "dimensions",
        "notes"
      ],
      "business_use": "Used for logistics analysis and delivery efficiency optimization"
    },
    {
      "name": "dim_location",
      "type": "location",
      "description": "Location dimension table - contains shipping address information",
      "source_table": "shipments",
      "key_fields": [
        "id"
      ],
      "attributes": [
        "shipping_address"
      ],
      "business_use": "Used for geographic analysis and regional sales statistics"
    },
    {
      "name": "dim_category",
      "type": "product",
      "description": "Category dimension table - contains category hierarchy structure",
      "source_table": "categories",
      "key_fields": [
        "id"
      ],
      "attributes": [
        "name",
        "description",
        "parent_id",
        "sort_order",
        "is_active"
      ],
      "business_use": "Used for category performance analysis and hierarchy statistics"
    },
    {
      "name": "dim_promotion",
      "type": "event",
      "description": "Promotion dimension table - contains coupon and promotion information",
      "source_table": "coupons",
      "key_fields": [
        "id",
        "code"
      ],
      "attributes": [
        "name",
        "description",
        "discount_type",
        "discount_value",
        "minimum_amount",
        "maximum_discount",
        "usage_limit",
        "usage_count",
        "starts_at",
        "expires_at",
        "is_active",
        "applicable_products",
        "applicable_categories"
      ],
      "business_use": "Used for marketing effectiveness analysis and ROI calculation"
    }
  ],
  "fact_tables": [
    {
      "name": "fact_sales",
      "description": "Sales fact table - records sales transactions",
      "source_table": "payments",
      "measures": [
        "quantity",
        "amount",
        "total",
        "discount"
      ],
      "dimensions": [
        "dim_date",
        "dim_customer",
        "dim_product",
        "dim_location"
      ]
    },
    {
      "name": "fact_sales",
      "description": "Sales fact table - records sales transactions",
      "source_table": "returns",
      "measures": [
        "quantity",
        "amount",
        "total",
        "discount"
      ],
      "dimensions": [
        "dim_date",
        "dim_customer",
        "dim_product",
        "dim_location"
      ]
    },
    {
      "name": "fact_sales",
      "description": "Sales fact table - records sales transactions",
      "source_table": "reviews",
      "measures": [
        "quantity",
        "amount",
        "total",
        "discount"
      ],
      "dimensions": [
        "dim_date",
        "dim_customer",
        "dim_product",
        "dim_location"
      ]
    },
    {
      "name": "fact_sales",
      "description": "Sales fact table - records sales transactions",
      "source_table": "shipments",
      "measures": [
        "quantity",
        "amount",
        "total",
        "discount"
      ],
      "dimensions": [
        "dim_date",
        "dim_customer",
        "dim_product",
        "dim_location"
      ]
    },
    {
      "name": "fact_sales",
      "description": "Sales fact table - records sales transactions",
      "source_table": "shopping_carts",
      "measures": [
        "quantity",
        "amount",
        "total",
        "discount"
      ],
      "dimensions": [
        "dim_date",
        "dim_customer",
        "dim_product",
        "dim_location"
      ]
    },
    {
      "name": "fact_sales",
      "description": "Sales fact table - records sales transactions",
      "source_table": "inventory_transactions",
      "measures": [
        "quantity",
        "amount",
        "total",
        "discount"
      ],
      "dimensions": [
        "dim_date",
        "dim_customer",
        "dim_product",
        "dim_location"
      ]
    },
    {
      "name": "fact_sales",
      "description": "Sales fact table - records sales transactions",
      "source_table": "order_items",
      "measures": [
        "quantity",
        "amount",
        "total",
        "discount"
      ],
      "dimensions": [
        "dim_date",
        "dim_customer",
        "dim_product",
        "dim_location"
      ]
    },
    {
      "name": "fact_sales",
      "description": "Sales fact table - records sales transactions",
      "source_table": "orders",
      "measures": [
        "quantity",
        "amount",
        "total",
        "discount"
      ],
      "dimensions": [
        "dim_date",
        "dim_customer",
        "dim_product",
        "dim_location"
      ]
    }
  ],
  "phase": "phase4",
  "summary": {
    "dimensions_by_type": {
      "event": 4,
      "location": 1,
      "people": 1,
      "product": 2,
      "time": 1
    },
    "rule_engine_info": {
      "engine": "Gopher-Lua v1.1.1",
      "lua_script": "knowledge/dimension_rules.lua"
    },
    "total_dimensions": 9,
    "total_fact_tables": 8
  },
  "timestamp": "2025-11-05T15:11:39.898043+08:00"
}