# Aika DBA Configuration File
# 支援環境變數覆蓋，例如: DB_HOST=192.168.1.100 ./bin/aika-dba

# 資料庫設定
database:
  type: "postgres"          # 資料庫類型: postgres, mysql
  host: "34.81.221.137"         # 資料庫主機 (Docker 容器映射到 localhost)
  port: 5432               # 資料庫端口
  user: "readonly_bk"   # 資料庫用戶名
  password: "help@999" # 資料庫密碼
  dbname: "bk_crm_prod"   # 資料庫名稱

# 應用程式設定
app:
  name: "Aika DBA"          # 應用程式名稱
  version: "0.1.0"         # 版本號
  port: 5005               # API 服務器端口
  host: "0.0.0.0"          # API 服務器主機

# Schema 收集設定
schema:
  output_file: "schema_output.json"  # Schema 輸出檔案名稱
  max_samples: 5         # 每個欄位的最大樣本數量
  timeout_seconds: 30    # Schema 收集超時時間（秒）

# LLM 設定
llm:
  provider: "local"        # LLM 提供者: openai, local
  model: "/Users/masato/Library/Caches/llama.cpp/Qwen_Qwen2.5-Coder-3B-Instruct-GGUF_qwen2.5-coder-3b-instruct-q4_k_m.gguf"  # 模型名稱
  api_key: ""             # API 金鑰 (建議使用環境變數 OPENAI_API_KEY)
  base_url: ""            # 自定義 API 端點 (建議使用環境變數 OPENAI_BASE_URL)
  host: "localhost"       # 本地 LLM 主機 (用於本地服務)
  port: 8080              # 本地 LLM 端口 (用於本地服務)
  timeout_seconds: 60     # LLM 請求超時時間

# 向量存儲設定
vectorstore:
  enabled: true           # 啟用向量存儲
  database_path: "data/knowledge_vector.db"  # SQLite 數據庫路徑
  embedder_type: "qwen"   # 嵌入生成器類型: simple, qwen, llm
  qwen_model_path: "models/orca-mini-3b-gguf:Q4_0.gguf"  # 更適合嵌入的輕量級模型
  embedding_dimension: 256  # 嵌入向量維度（減少以提升性能）
  chunk_size: 1000        # 知識塊大小
  chunk_overlap: 200      # 塊重疊大小

# 安全設定
security:
  enable_sql_sandbox: true  # 啟用 SQL 沙箱模式
  max_query_time: 30       # 最大查詢執行時間（秒）
  allowed_tables: []       # 允許的表格列表（空表示全部允許）

# 記錄設定
logging:
  level: "info"            # 記錄等級: debug, info, warn, error
  format: "json"           # 記錄格式: json, text
  output: "stdout"         # 輸出位置: stdout, stderr, file
  file_path: "logs/aika-dba.log"  # 記錄檔案路徑（當 output=file 時使用）